<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Alpha diversity metrics — getAlphaMetrics • BioTIMEr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Alpha diversity metrics — getAlphaMetrics"><meta name="description" content="Calculates a set of standard alpha diversity metrics"><meta property="og:description" content="Calculates a set of standard alpha diversity metrics"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BioTIMEr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction to BioTIMEr</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bioTIMEHub/BioTIMEr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Alpha diversity metrics</h1>
      <small class="dont-index">Source: <a href="https://github.com/bioTIMEHub/BioTIMEr/blob/main/R/metricsBioTIME.R" class="external-link"><code>R/metricsBioTIME.R</code></a></small>
      <div class="d-none name"><code>getAlphaMetrics.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates a set of standard alpha diversity metrics</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getAlphaMetrics</span><span class="op">(</span><span class="va">x</span>, <span class="va">measure</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>(<code>data.frame</code>) BioTIME data in the format of the output of the
<code><a href="resampling.html">resampling</a></code> function. The <code>resamp</code> column is optional.</p></dd>


<dt id="arg-measure">measure<a class="anchor" aria-label="anchor" href="#arg-measure"></a></dt>
<dd><p>(<code>character</code>) chosen currency defined by a single column
name.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a <code>data.frame</code> with results for species richness
 (<code>S</code>), numerical abundance (<code>N</code>), maximum numerical abundance
 (<code>maxN</code>), Shannon Index (<code>Shannon</code>), Exponential Shannon
 (<code>expShannon</code>), Simpson's Index (Simpson), Inverse Simpson
 (<code>InvSimpson</code>), Probability of intraspecific encounter (<code>PIE</code>) and
 McNaughton's Dominance (<code>DomMc</code>) for each year and <code>assemblageID</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function <code>getAlphaMetrics</code> computes nine alpha diversity
metrics for a given community data frame, where <code>measure</code> is a character
input specifying the abundance or biomass field used for the calculations.
For each row of the data frame with data, <code>getAlphaMetrics</code> calculates
the following metrics:</p>
<p>- Species richness (<code>S</code>) as the total number of species in each year
with currency &gt; 0.</p>
<p>- Numerical abundance (<code>N</code>) as the total currency (sum) in each year
(either total abundance or total biomass).</p>
<p>- Maximum Numerical abundance (maxN) as the highest currency value reported
in each year.</p>
<p>- Shannon or Shannon–Weaver index is calculated as
\(\sum_{i}p_{i}log_{b}p_{i}\), where \(p_{i}\) is the proportional
abundance of species i and b is the base of the logarithm (natural
logarithms), while exponential Shannon is given by <code>exp(Shannon)</code>.</p>
<p>- Simpson's index is calculated as \(1-sum(p_{i}^{2})\), while Inverse
Simpson as \(1/sum(p_{i}^{2})\).</p>
<p>- McNaughton's Dominance is calculated as the sum of the pi of the two most
abundant species.</p>
<p>- Probability of intraspecific encounter or PIE is calculated as
\(\left(\frac{N}{N-1}\right)\left(1-\sum_{i=1}^{S}\pi_{i}^{2}\right)\).</p>
<p>Note that the input data frame needs to be in the format of the output of
 the <code><a href="gridding.html">gridding</a></code> function and/or <code><a href="resampling.html">resampling</a></code>
 functions, which includes keeping the default BioTIME data column names. If
 such columns are not found an error is issued and the computations are
 halted. There is an exception for the <code>resamp</code> column: the function
 runs even without it.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="co"># Mean and sd values of the metrics for several resamplings</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="gridding.html">gridding</a></span><span class="op">(</span><span class="va">BTsubset_meta</span>, <span class="va">BTsubset_data</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="resampling.html">resampling</a></span><span class="op">(</span>measure <span class="op">=</span> <span class="st">"BIOMASS"</span>, resamps <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">getAlphaMetrics</span><span class="op">(</span>measure <span class="op">=</span> <span class="st">"BIOMASS"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>       <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>          .cols <span class="op">=</span> <span class="op">!</span><span class="va">resamp</span>, <span class="co"># FIXME</span></span></span>
<span class="r-in"><span>          .fns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span>, sd <span class="op">=</span> <span class="va">sd</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       .by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">assemblageID</span>, <span class="va">YEAR</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>       col <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"_"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       names_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"metric"</span>, <span class="st">"stat"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       names_sep <span class="op">=</span> <span class="st">"_"</span>,</span></span>
<span class="r-in"><span>       names_transform <span class="op">=</span> <span class="va">as.factor</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">stat</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> OK: all SL studies have 1 grid cell</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NA values found and removed.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Only a subset of `x` is used.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    assemblageID  YEAR metric       mean    sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 211_504467    <span style="text-decoration: underline;">1</span>984 S          11         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 211_504467    <span style="text-decoration: underline;">1</span>984 N          11.8       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 211_504467    <span style="text-decoration: underline;">1</span>984 maxN        2.9       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 211_504467    <span style="text-decoration: underline;">1</span>984 Shannon     2.02      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 211_504467    <span style="text-decoration: underline;">1</span>984 Simpson     0.850     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 211_504467    <span style="text-decoration: underline;">1</span>984 invSimpson  6.66      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 211_504467    <span style="text-decoration: underline;">1</span>984 PIE         0.929     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 211_504467    <span style="text-decoration: underline;">1</span>984 DomMc       0.409     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 211_504467    <span style="text-decoration: underline;">1</span>984 expShannon  7.55      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 211_504467    <span style="text-decoration: underline;">1</span>985 S           5         0</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://albansagouis.com" class="external-link">Alban Sagouis</a>, Faye Moyes, Inês S. Martins, Jonathan M. Chase, Maria Dornelas, Anne E. Magurran, European Research Council grant AdG BioTIME 250189, European Research Council grant PoC BioCHANGE 727440, European Research Council grant AdG MetaCHANGE 101098020, The Leverhulme Centre for Anthropocene Biodiversity grant RC-2018-021, German Centre for Integrative Biodiversity Research (iDiv) Halle-Jena-Leipzig, Martin Luther University Halle-Wittenberg, University of St Andrews.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

