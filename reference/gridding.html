<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>gridding BioTIME data — gridding • BioTIMEr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="gridding BioTIME data — gridding"><meta name="description" content="grids BioTIME data into a discrete global grid based on the
   location of the samples (latitude/longitude)."><meta property="og:description" content="grids BioTIME data into a discrete global grid based on the
   location of the samples (latitude/longitude)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BioTIMEr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction to BioTIMEr</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bioTIMEHub/BioTIMEr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>gridding BioTIME data</h1>
      <small class="dont-index">Source: <a href="https://github.com/bioTIMEHub/BioTIMEr/blob/v0.3.1-CRAN/R/gridBioTIME.R" class="external-link"><code>R/gridBioTIME.R</code></a></small>
      <div class="d-none name"><code>gridding.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>grids BioTIME data into a discrete global grid based on the
   location of the samples (latitude/longitude).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gridding</span><span class="op">(</span><span class="va">meta</span>, <span class="va">btf</span>, res <span class="op">=</span> <span class="fl">12</span>, resByData <span class="op">=</span> <span class="cn">FALSE</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-meta">meta<a class="anchor" aria-label="anchor" href="#arg-meta"></a></dt>
<dd><p>(<code>data.frame</code>, <code>tibble</code> or <code>data.table</code>) BioTIME
metadata.</p></dd>


<dt id="arg-btf">btf<a class="anchor" aria-label="anchor" href="#arg-btf"></a></dt>
<dd><p>(<code>data.frame</code>, <code>tibble</code> or <code>data.table</code>) BioTIME
data.</p></dd>


<dt id="arg-res">res<a class="anchor" aria-label="anchor" href="#arg-res"></a></dt>
<dd><p>(<code>integer</code>) cell resolution. Must be in the range [0,30].
Larger values represent finer resolutions. Default: 12 (~96 sq km). Passed
to <code><a href="https://rdrr.io/pkg/dggridR/man/dgconstruct.html" class="external-link">dgconstruct</a></code>.</p></dd>


<dt id="arg-resbydata">resByData<a class="anchor" aria-label="anchor" href="#arg-resbydata"></a></dt>
<dd><p>(<code>logical</code>) FALSE by default. If TRUE, the function
<code><a href="https://rdrr.io/pkg/dggridR/man/dg_closest_res_to_area.html" class="external-link">dg_closest_res_to_area</a></code> is called to adapt <code>res</code>
 to the data extent. The new <code>res</code> value is used even if a value is
 provided byt the user.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>if TRUE, a warning will be shown when one-year-long time
series are found in btf and excluded.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a <code>'data.frame'</code>, with selected columns from the
<code>btf</code> and <code>meta</code> data frames, an extra integer column called
<code>'cell'</code> and two character columns called 'StudyMethod' and
'assemblageID' (concatenation of <code>STUDY_ID</code> and <code>cell</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Each BioTIME study contains distinct samples which were collected
with a consistent methodology over time, and each with unique coordinates and
date. These samples can be fixed plots (i.e. SL or 'single-location' studies
where measures are taken from a set of specific georeferenced sites at any
given time) or wide-ranging surveys, transects, tows, and so on (i.e. ML or
'multi-location' studies where measures are taken from multiple sampling
locations over large extents that may or may not align from year to year, see
<code>runResampling</code>. <code>gridding</code> is a function designed to deal with the
issue of varying spatial extent between studies by using a global grid of
hexagonal cells derived from <code><a href="https://rdrr.io/pkg/dggridR/man/dgconstruct.html" class="external-link">dgconstruct</a></code> and assigning
the individual samples to the cells across the grid based on its latitude and
longitude. Specifically, each sample is assigned a different combination of
study ID and grid cell resulting in a unique identifier for each assemblage
time series within each cell (assemblageID). This allows for the integrity of
each study and each sample to be maintained, while large extent studies are
split into local time series at the grid cell level. By default meta
represents a long form data frame containing the data information for BioTIME
studies and <code>btf</code> is a data frame containing long form data from a main
BioTIME query (see Example). <code>res</code> defines the global grid cell
resolution, thus determining the size of the cells (see
<code>vignette("dggridR")</code>). <code>res = 12</code> was found to be the most
appropriate value when working on the whole BioTIME database(corresponding to
~96 km2 cell area), but the user can define their own grid resolution (e.g.
<code>res = 14</code>, or when <code>resbyData = TRUE</code> allow the function to find
the best <code>res</code> based on the average study extent.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="va">gridded_data</span> <span class="op">&lt;-</span> <span class="fu">gridding</span><span class="op">(</span>meta <span class="op">=</span> <span class="va">BTsubset_meta</span>, btf <span class="op">=</span> <span class="va">BTsubset_data</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">gridded_data</span> <span class="op">&lt;-</span> <span class="fu">gridding</span><span class="op">(</span>meta <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">BTsubset_meta</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                           btf <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">BTsubset_data</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">gridded_data</span> <span class="op">&lt;-</span> <span class="fu">gridding</span><span class="op">(</span>meta <span class="op">=</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="va">BTsubset_meta</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                           btf <span class="op">=</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="va">BTsubset_data</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://albansagouis.com" class="external-link">Alban Sagouis</a>, Faye Moyes, Inês S. Martins, Jonathan M. Chase, Maria Dornelas, Anne E. Magurran, European Research Council grant AdG BioTIME 250189, European Research Council grant PoC BioCHANGE 727440, European Research Council grant AdG MetaCHANGE 101098020, The Leverhulme Centre for Anthropocene Biodiversity grant RC-2018-021, German Centre for Integrative Biodiversity Research (iDiv) Halle-Jena-Leipzig, Martin Luther University Halle-Wittenberg, University of St Andrews.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

