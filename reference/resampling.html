<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Rarefy BioTIME data to an equal number of samples per year — resampling • BioTIMEr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Rarefy BioTIME data to an equal number of samples per year — resampling"><meta property="og:description" content="Takes the output of gridding and applies sample-based rarefaction to
standardise the number of samples per year within each cell-level time series
(i.e. assemblageID)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BioTIMEr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/vignette1.html">Introduction to BioTIMEr</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bioTIMEHub/BioTIMEr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rarefy BioTIME data to an equal number of samples per year</h1>
    <small class="dont-index">Source: <a href="https://github.com/bioTIMEHub/BioTIMEr/blob/HEAD/R/rarefyBioTIME.R" class="external-link"><code>R/rarefyBioTIME.R</code></a></small>
    <div class="hidden name"><code>resampling.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Takes the output of <code><a href="gridding.html">gridding</a></code> and applies sample-based rarefaction to
standardise the number of samples per year within each cell-level time series
(i.e. assemblageID).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">resampling</span><span class="op">(</span><span class="va">x</span>, <span class="va">measure</span>, resamps <span class="op">=</span> <span class="fl">1L</span>, conservative <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>(<code>data.frame</code>) BioTIME gridded data to be resampled (in the format of
the output of the <code><a href="gridding.html">gridding</a></code> function).</p></dd>


<dt>measure</dt>
<dd><p>(<code>character</code>) currency to be retained during the sample-based
rarefaction. Can be either defined by a single column name or a vector of
two or more column names.</p></dd>


<dt>resamps</dt>
<dd><p>(<code>integer</code>) number of repetitions. Default is 1.</p></dd>


<dt>conservative</dt>
<dd><p>(<code>logical</code>). <code>FALSE</code> by default. If <code>TRUE</code>,
whenever a <code>NA</code>
is found in the measure field(s), the whole sample is removed instead of the
missing observations only.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns a single long form <code>data.frame</code> containing the total currency
or currencies of interest (sum) for each species in each year within each
rarefied time series (i.e. <code>assemblageID</code>). An extra integer column called
<code>resamp</code> indicates the specific iteration.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Sample-based rarefaction prevents temporal variation in sampling effort from
affecting diversity estimates (see Gotelli N.J., Colwell R.K. 2001 Quantifying biodiversity: procedures and pitfalls in the measurement and comparison of species richness. Ecology Letters 4(4), 379-391) by selecting an equal number of samples across all years in a time series.
<code>resampling</code> counts the number of unique samples taken in each year (sampling effort),
identifies the minimum number of samples across all years, and then uses this minimum to
randomly resample each year down to that number. Thus, standardising the
sampling effort between years,
standard biodiversity metrics can be calculated based on an equal number of
samples (e.g. using <code><a href="getAlphaMetrics.html">getAlphaMetrics</a></code>, <code><a href="getAlphaMetrics.html">getAlphaMetrics</a></code>).
 <code>measure</code> is a <code>character</code>
input specifying the chosen currency to be used during the sample-based
rarefaction. It can be a single column name or a vector of two or more column
names - e.g. for BioTIME, <code>measure="ABUNDANCE"</code>, <code>measure="BIOMASS"</code>
or <code>measure = c("ABUNDANCE", "BIOMASS")</code>.</p>
<p>By default, any observations with <code>NA</code> within the currency field(s) are
removed. You can choose to remove the full sample where such observations are
present by setting <code>conservative</code> to <code>TRUE</code>. <code>resamps</code> can be used to define
multiple iterations, effectively creating multiple alternative datasets
as in each iteration different samples will be randomly selected for the
years where number of samples &gt; minimum.
Note that the function always returns a single data frame, i.e. if <code>resamps</code> &gt; 1,
the returned data frame is the result of individual data frames concatenated
together, one from each iteration identified by a numerical
unique identifier 1:resamps.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bioTIMEHub/BioTIMEr" class="external-link">BioTIMEr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="gridding.html">gridding</a></span><span class="op">(</span><span class="va">BTsubset_meta</span>, <span class="va">BTsubset_data</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">resampling</span><span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"BIOMASS"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">resampling</span><span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"ABUNDANCE"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">resampling</span><span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ABUNDANCE"</span>,<span class="st">"BIOMASS"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alban Sagouis, Faye Moyes, Inês S. Martins, Jonathan M. Chase, Maria Dornelas, Anne E. Magurran, European Research Council grant AdG BioTIME 250189, European Research Council grant PoC BioCHANGE 727440, European Research Council grant AdG MetaCHANGE 101098020, The Leverhulme Centre for Anthropocene Biodiversity grant RC-2018-021.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

