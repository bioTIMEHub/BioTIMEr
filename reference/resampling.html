<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rarefy BioTIME data to an equal number of samples per year — resampling • BioTIMEr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rarefy BioTIME data to an equal number of samples per year — resampling"><meta name="description" content="Takes the output of gridding and applies sample-based
rarefaction to standardise the number of samples per year within each
cell-level time series (i.e. assemblageID)."><meta property="og:description" content="Takes the output of gridding and applies sample-based
rarefaction to standardise the number of samples per year within each
cell-level time series (i.e. assemblageID)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BioTIMEr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction to BioTIMEr</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bioTIMEHub/BioTIMEr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Rarefy BioTIME data to an equal number of samples per year</h1>
      <small class="dont-index">Source: <a href="https://github.com/bioTIMEHub/BioTIMEr/blob/main/R/resamplingBioTIME.R" class="external-link"><code>R/resamplingBioTIME.R</code></a></small>
      <div class="d-none name"><code>resampling.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Takes the output of <code><a href="gridding.html">gridding</a></code> and applies sample-based
rarefaction to standardise the number of samples per year within each
cell-level time series (i.e. assemblageID).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">resampling</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">measure</span>,</span>
<span>  resamps <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  conservative <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  summarise <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>(<code>data.frame</code>) BioTIME gridded data to be resampled (in the
format of the output of the <code><a href="gridding.html">gridding</a></code> function).</p></dd>


<dt id="arg-measure">measure<a class="anchor" aria-label="anchor" href="#arg-measure"></a></dt>
<dd><p>(<code>character</code>) currency to be retained during the
sample-based rarefaction. Can be either defined by a single column name or a
vector of two or more column names.</p></dd>


<dt id="arg-resamps">resamps<a class="anchor" aria-label="anchor" href="#arg-resamps"></a></dt>
<dd><p>(<code>integer</code>) number of repetitions. Default is 1.</p></dd>


<dt id="arg-conservative">conservative<a class="anchor" aria-label="anchor" href="#arg-conservative"></a></dt>
<dd><p>(<code>logical</code>). <code>FALSE</code> by default. If
<code>TRUE</code>, whenever a <code>NA</code> is found in the measure field(s), the whole
sample is removed instead of the missing observations only.</p></dd>


<dt id="arg-summarise">summarise<a class="anchor" aria-label="anchor" href="#arg-summarise"></a></dt>
<dd><p>(<code>logical</code>). <code>TRUE</code> by default. If <code>FALSE</code>,
the function returns abundance and/or biomass summed at the SAMPLE_DESC level
git pull(i.e., per sample), rather than per species per year.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>(<code>logical</code>). <code>TRUE</code> by default. If FALSE, warnings
when NA values or one-year-long time series are found in <code>x</code> and
excluded are hidden.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a single long form <code>data.frame</code> containing the total
currency or currencies of interest (sum) for each species in each year within
each rarefied time series (i.e. <code>assemblageID</code>). An extra integer column
called <code>resamp</code> indicates the specific iteration.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Sample-based rarefaction prevents temporal variation in sampling
effort from affecting diversity estimates (see Gotelli N.J., Colwell R.K.
2001 Quantifying biodiversity: procedures and pitfalls in the measurement and
comparison of species richness. Ecology Letters 4(4), 379-391) by selecting
an equal number of samples across all years in a time series.
<code>resampling</code> counts the number of unique samples taken in each year
(sampling effort), identifies the minimum number of samples across all years,
and then uses this minimum to randomly resample each year down to that
number. Thus, standardising the sampling effort between years, standard
biodiversity metrics can be calculated based on an equal number of samples
(e.g. using <code><a href="getAlphaMetrics.html">getAlphaMetrics</a></code>, <code><a href="getAlphaMetrics.html">getAlphaMetrics</a></code>).
<code>measure</code> is a <code>character</code> input specifying the chosen currency to
 be used during the sample-based rarefaction. It can be a single column name
or a vector of two or more column names - e.g. for BioTIME,
<code>measure="ABUNDANCE"</code>, <code>measure="BIOMASS"</code> or <code>measure =
c("ABUNDANCE", "BIOMASS")</code>.</p>
<p>By default, any observations with <code>NA</code> within the currency field(s) are
removed. You can choose to remove the full sample where such observations are
present by setting <code>conservative</code> to <code>TRUE</code>. <code>resamps</code> can be
used to define multiple iterations, effectively creating multiple alternative
datasets as in each iteration different samples will be randomly selected for
the years where number of samples &gt; minimum. Note that the function always
returns a single data frame, i.e. if <code>resamps</code> &gt; 1, the returned data
frame is the result of individual data frames concatenated together, one from
each iteration identified by a numerical unique identifier 1:resamps.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="gridding.html">gridding</a></span><span class="op">(</span><span class="va">BTsubset_meta</span>, <span class="va">BTsubset_data</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">resampling</span><span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"BIOMASS"</span>, summarise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">resampling</span><span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"ABUNDANCE"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">resampling</span><span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ABUNDANCE"</span>,<span class="st">"BIOMASS"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Without summarising the species abundances are summed at the SAMPLE_DESC level</span></span></span>
<span class="r-in"><span>  <span class="fu">resampling</span><span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"BIOMASS"</span>, summarise <span class="op">=</span> <span class="cn">FALSE</span>, conservative <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://albansagouis.com" class="external-link">Alban Sagouis</a>, Faye Moyes, Inês S. Martins, Jonathan M. Chase, Maria Dornelas, Anne E. Magurran, European Research Council grant AdG BioTIME 250189, European Research Council grant PoC BioCHANGE 727440, European Research Council grant AdG MetaCHANGE 101098020, The Leverhulme Centre for Anthropocene Biodiversity grant RC-2018-021, German Centre for Integrative Biodiversity Research (iDiv) Halle-Jena-Leipzig, Martin Luther University Halle-Wittenberg, University of St Andrews.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

